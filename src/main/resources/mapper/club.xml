<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="club">
	<select id="selectOne" resultType="Member">
		select * from member where member_id=#{member_id}
	</select>
	<resultMap type="Club" id="clubMain">
		
	</resultMap>
	<select id="selectClub" resultMap="clubMain">
		select * from circle where circle_num=#{circle_num}
	</select>
	<resultMap type="com.yj.project.member.model.vo.Member" id="club"></resultMap>
	<select id="selectMember" resultMap="club">
		select * from member where circle1_num=#{circle_num}
	</select>
	<insert id="insertBoard" parameterType="cBoard">
		insert into circle_board values(CIRCLE_BOARD_SEQ.NEXTVAL,#{cb_title},#{cb_content},#{cb_attachment},0,#{member_id},#{circle_num},#{cb_attachment2},sysdate)
	</insert>
	<select id="selectBoardList" resultType="cBoard">
		SELECT * FROM CIRCLE_BOARD WHERE CIRCLE_NUM=#{circle_num} ORDER BY CB_NUM DESC
	</select>
	<delete id="deleteBoard">
		DELETE FROM CIRCLE_BOARD WHERE CB_NUM=#{cb_num}
	</delete>
	<select id="selectBoardOne" resultType="cBoard">
		SELECT * FROM CIRCLE_BOARD WHERE CB_NUM=#{no}
	</select>
	<update id="updateBoard" parameterType="cBoard">
	UPDATE CIRCLE_BOARD SET CB_TITLE=#{cb_title},CB_CONTENT=#{cb_content} WHERE CB_NUM=#{cb_num}
	</update>
	
	<select id='selectMatching' parameterType="_int" resultType='com.yj.project.calendar.model.vo.Matching'>
	select req_withus.*,circle.circle_name,circle.circle_photo  from req_withus full outer JOIN circle ON req_withus.REQ_CIRCLE=circle.circle_num where req_withus.REGISTER_CIRCLE=#{circle1_num} and req_withus.status in('S','C')
	</select>
	<select id='selectFinal' parameterType="_int" resultType='com.yj.project.calendar.model.vo.FinalWithus'>
	select final_withus.*,circle.circle_name from final_withus full outer JOIN circle ON final_withus.req_CIRCLE=circle.circle_num where register_circle = #{circle1_num}
	</select>
	<select id='selectNotice' parameterType="_int" resultType='com.yj.project.calendar.model.vo.ClubNotice'>
	select * from club_notice where circle_num = #{circle1_num} order by rownum desc
	</select>

	<select id='countNotice' parameterType="map" resultType="_int">
	select count(*) from club_notice where circle_num = #{circle_num}
	</select>
	
	<update id="noticeUpdate" parameterType="string">
	update member set member_notice = 0 where member_id = #{member_id}
	</update>
</mapper>
