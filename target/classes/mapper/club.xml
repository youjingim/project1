<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="club">
	<select id="selectOne" resultType="Member">
		select * from member where member_id=#{member_id}
	</select>
	<resultMap type="Club" id="clubMain">
		
	</resultMap>
	<select id="selectClub" resultMap="clubMain">
		select * from circle where circle_num=#{circle_num}
	</select>
	<resultMap type="Member" id="club"></resultMap>
	<select id="selectMember" resultMap="club">
		select * from member where circle1_num=#{circle_num}
	</select>
	<insert id="insertBoard" parameterType="cBoard">
		insert into circle_board values(CIRCLE_BOARD_SEQ.NEXTVAL,#{cb_title},#{cb_content},#{cb_attachment},0,#{member_id},#{circle_num},#{cb_attachment2},sysdate)
	</insert>
	<select id="selectBoardList" resultType="cBoard">
		SELECT * FROM CIRCLE_BOARD WHERE CIRCLE_NUM=#{circle_num} ORDER BY CB_NUM DESC
	</select>
	<delete id="deleteBoard">
		DELETE FROM CIRCLE_BOARD WHERE CB_NUM=#{cb_num}
	</delete>
	<select id="selectBoardOne" resultType="cBoard">
		SELECT * FROM CIRCLE_BOARD WHERE CB_NUM=#{no}
	</select>
	<update id="updateBoard" parameterType="cBoard">
	UPDATE CIRCLE_BOARD SET CB_TITLE=#{cb_title},CB_CONTENT=#{cb_content} WHERE CB_NUM=#{cb_num}
	</update>
	
	<select id='selectMatching' parameterType="_int" resultType='com.yj.project.calendar.model.vo.Matching'>
	select req_withus.*,circle.circle_name,circle.circle_photo  from req_withus full outer JOIN circle ON req_withus.REQ_CIRCLE=circle.circle_num where req_withus.REGISTER_CIRCLE=#{circle1_num}
	</select>
	<update id="deleteMember">
		UPDATE MEMBER SET CIRCLE1_NUM=0 WHERE MEMBER_ID=#{id} 
	</update>
	<insert id="insertBudget">
		INSERT INTO CIRCLE_BUDGET VALUES(CIRCLE_BUDGET_SEQ.NEXTVAL,#{circle_num},#{member_id},#{budget_content},null,#{budget_input},#{budget_output},#{used_date},sysdate)
	</insert>
	<resultMap type="budget" id="insertBud">
		<id property="budget_no" column="budget_num"/>
	</resultMap>
	<select id="selectBudgetList" resultMap="insertBud">
		SELECT * FROM CIRCLE_BUDGET WHERE CIRCLE_NUM=#{circle_num}
	</select>
	<select id="selectMemberCount" resultType="_int">
		SELECT COUNT(*) FROM MEMBER WHERE CIRCLE1_NUM=#{circle_num}
	</select>
	<select id="selectCountBudget" resultType="_int">
		SELECT COUNT(*) FROM CIRCLE_BUDGET WHERE CIRCLE_NUM=#{circle_num}
	</select>
	<insert id="insertComment">
		INSERT INTO CB_COMMENT VALUES(CB_COMMENT_SEQ.NEXTVAL,#{cb_num},#{member_id},#{cb_comment_content},sysdate)
	</insert>
	
	<select id="commentList" resultType="cb_comment">
		SELECT * FROM CB_COMMENT WHERE CB_NUM=#{cb_num}
	</select>
</mapper>
